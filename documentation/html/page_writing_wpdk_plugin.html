<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>WPDK: How to write a WordPress plugin with full WPDK support</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree-override.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo-160x160.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">WPDK
   &#160;<span id="projectnumber">1.2.0</span>
   </div>
   <div id="projectbrief">WordPress Development Kit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_writing_wpdk_plugin.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">How to write a WordPress plugin with full WPDK support </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="page_how_to_plugin_1"></a>
Overview</h1>
<p>Writing a WordPress plugin with full WPDK support means using all the WPDK features in your code to create a solid product, that is fast to execute, and easy to maintain and evolve.</p>
<p>For reaching this goal, you have to follow some simple rules and you have to use some simple tricks in your source code. All of them are described in this page, step by step. If you don't follow them, you can anyway use WPDK for specific tasks; but you loose all the major gains WPDK is ready to give you.</p>
<p>First of all, you have to completely develop your plugin in an object oriented approach, extending some basic WPDK object. This is necessary not only for a better encapsulation of data, but also to make a full use of <a class="el" href="page_features.html#section_autoload">WPDK autoloading technology</a>.</p>
<p>Let's assume that you are creating a new WordPress plugin, named <code>Test Plugin</code>.</p>
<p>Your first step is defining the main class of your WordPress plugin, your <em>plugin</em> from now on. You can define it directly in the plugin main file, the one that contains <em>the comment header</em> used by WordPress to recognize and extract informations about any plugin.</p>
<p>In the root directory of your plugin, create a file named <code>testplugin.php</code>. Inside this file, insert the WordPress standard comment for recognize this plugin, and the definition of the main class:</p>
<div class="fragment"><div class="line">&lt;?php</div>
<div class="line"><span class="comment">// Include WPDK framework - the root directory name of WPDK may be different.</span></div>
<div class="line"><span class="comment">// Please change the line below according to your environment.</span></div>
<div class="line">require_once( trailingslashit( dirname( __FILE__ ) ) . <span class="stringliteral">&#39;wpdk-production/wpdk.php&#39;</span> );</div>
<div class="line"></div>
<div class="line"><span class="comment">// Define of include your main plugin class</span></div>
<div class="line"><span class="keywordflow">if</span>( !class_exists( <span class="stringliteral">&#39;TestPlugin&#39;</span> ) ) {</div>
<div class="line">  <span class="keyword">class </span>TestPlugin <span class="keyword">extends</span> <a class="code" href="classWPDKWordPressPlugin.html">WPDKWordPressPlugin</a> {</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Please note the declaration of a class named <code>TestPlugin</code>, that extends <code><a class="el" href="classWPDKWordPressPlugin.html">WPDKWordPressPlugin</a></code> class. We have to deepen the behaviour of the <code><a class="el" href="classWPDKWordPressPlugin.html">WPDKWordPressPlugin</a></code> class, because your main class inherits all things it needs directly from it.</p>
<p>The <code><a class="el" href="classWPDKWordPressPlugin.html">WPDKWordPressPlugin</a></code> class is one of the most important class of the whole <em>WPDK framework</em>. It encapsulates all init procedures for a plugin, and provides the fundamental startup of a plugin in order to make it full compatible with the WPDK standard. You rarely (never) instantiate <code><a class="el" href="classWPDKWordPressPlugin.html">WPDKWordPressPlugin</a></code> object directly. Instead, you instantiate subclasses of the <code><a class="el" href="classWPDKWordPressPlugin.html">WPDKWordPressPlugin</a></code> class.</p>
<p>In WPDK environment, this class <b>must</b> be used to extend the main class of a plugin: its goal is to initialize the environment in which the plugin itself operates.</p>
<p>In addition to initializing, <code><a class="el" href="classWPDKWordPressPlugin.html">WPDKWordPressPlugin</a></code> class performs automatically for you a large series of standard procedures needed in normal coding of a WordPress standard Plugin, and gives access to a lot of properties and methods really useful for your develop:</p>
<ul>
<li>Gets directly from WordPress comments, and stores in its properties, information about your plugin : plugin name, version, the text and the text domain path.</li>
<li>Prepares a set of standard properties with most commonly used paths and urls.</li>
<li>Provides a lot of hooks to wrap (filters and actions) among the most used in WordPress environment.</li>
<li>Prepares an instance of <code>WPDKWatchDog</code> object for your own log.</li>
</ul>
<p>All properties and methods of this class are documented in <b>PHPDoc</b> format compatible with <em>Doxygen</em> tool, so you can extract all detailed info and help through your PHP IDE.</p>
<p>The class <code>TestPlugin</code>, extending <code><a class="el" href="classWPDKWordPressPlugin.html">WPDKWordPressPlugin</a></code>, is the main class of your plugin. Through it, you can control every aspect of your plugin and manage what to do exactly where you want ( in WordPress front end, in WordPress admin area, in both worlds, and so on ). Using this class as a manager, you can write all code you need to fulfil the scope of your plugin.</p>
<p>When WordPress loads your plugin through this file, this class have also to be engaged, through the line:</p>
<div class="fragment"><div class="line">$GLOBALS[<span class="stringliteral">&#39;TestPlugin&#39;</span>] = <span class="keyword">new</span> TestPlugin();</div>
</div><!-- fragment --><p>that you have to put at the end of the class definition. In this way, your plugin becomes up and running, obviously if it was previously activated. Now our test code becomes this:</p>
<div class="fragment"><div class="line">&lt;?php</div>
<div class="line">    <span class="comment">// Include WPDK framework - the root directory name of WPDK may be different.</span></div>
<div class="line">    <span class="comment">// Please change the line below according to your environment.</span></div>
<div class="line">    require_once( trailingslashit( dirname( __FILE__ ) ) . <span class="stringliteral">&#39;wpdk-production/wpdk.php&#39;</span> );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Define of include your main plugin class</span></div>
<div class="line">    <span class="keywordflow">if</span>( !class_exists( <span class="stringliteral">&#39;TestPlugin&#39;</span> ) ) {</div>
<div class="line">      <span class="keyword">class </span>TestPlugin <span class="keyword">extends</span> <a class="code" href="classWPDKWordPressPlugin.html">WPDKWordPressPlugin</a> {</div>
<div class="line"></div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classWPDKWordPressPlugin.html#a8ef77288a5f940c68ebc57fdf0102078" title="Construct.">__construct</a>( $file ) {</div>
<div class="line"></div>
<div class="line">          parent::__construct( $file );</div>
<div class="line"></div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $GLOBALS[<span class="stringliteral">&#39;TestPlugin&#39;</span>] = <span class="keyword">new</span> TestPlugin();</div>
</div><!-- fragment --><p>Please note that creating an instance of <code>TestPlugin</code> class <em>does not mean activating the whole plugin into the WordPress environment</em>. The physical activation of plugin is as usual demanded to normal WordPress flow.</p>
<h1><a class="anchor" id="page_how_to_plugin_2_1"></a>
Filesystem guideline</h1>
<p>In order to get all benefits from <em>WPDK framework</em> we suggest you to use a standard organization for your plugin filesystem. The <em>WPDK framework</em> prepares for you a set of standard folder reference properties accessible from <code>TestPlugin</code> main class instance. The standard plugin filesystem recognised from WPDK has this form:</p>
<ul>
<li><b>Your Plugin main folder</b><ul>
<li>assets/<ul>
<li>css/<ul>
<li>images</li>
</ul>
</li>
<li>js/</li>
</ul>
</li>
<li>classes/</li>
<li>localization/</li>
</ul>
</li>
</ul>
<h3>Useful assets</h3>
<p>In addition, <em>WPDK framework</em> also provides a <code>database</code> folder reference:</p>
<ul>
<li><b>Your Plugin folder</b><ul>
<li>assets/<ul>
<li>css/<ul>
<li>images</li>
</ul>
</li>
<li>js/</li>
</ul>
</li>
<li>classes/</li>
<li>localization/</li>
<li>database/</li>
</ul>
</li>
</ul>
<p>This filesystem tree is mapped into the following properties of the <code>TestPlugin</code> main class: </p>
<pre class="fragment">$this-&gt;path
$this-&gt;classesPath
$this-&gt;databasePath
</pre><p>In addition, you have also the following <code>http</code> URL properties: </p>
<pre class="fragment">$this-&gt;url
$this-&gt;assetsURL
$this-&gt;cssURL
$this-&gt;imagesURL
$this-&gt;javascriptURL
</pre><p>All of them are accessible through the instance of <code>TestPlugin</code> class you defined above.</p>
<blockquote class="doxtable">
<p><b>Remember that mapping is not dynamic!</b> Paths are not dynamically extracted from your own folder tree; for obvious reasons, all filesystem properties have a constant init. <code>$this-&gt;cssURL</code>, for example, is always equal to <code>trailingslashit( plugin_dir_url( $main_file ) ) . "css/";</code>.</p>
<p></p>
</blockquote>
<h1><a class="anchor" id="page_how_to_plugin_4"></a>
Plugin activation</h1>
<p>The method <code>activation</code> of your <code>TestPlugin</code> class is invoked every time your plugin is activated. Please note that <b>activation is not loading</b>: the activation of a WordPress plugin happens just once, normally through <code>plugin</code> page of WordPress admin area, when a user choose to activate a plugin. From that moment on, the plugin becomes <em>active</em>, and this method is not invoked anymore.</p>
<p>To override this method and put all the code you need to execute whenever your plugin is activated, you have to declare it into <code>TestPlugin</code> class definition, in this way:</p>
<div class="fragment"><div class="line">&lt;?php</div>
<div class="line">    <span class="comment">// Include WPDK framework - the root directory name of WPDK may be different.</span></div>
<div class="line">    <span class="comment">// Please change the line below according to your environment.</span></div>
<div class="line">    require_once( trailingslashit( dirname( __FILE__ ) ) . <span class="stringliteral">&#39;wpdk-production/wpdk.php&#39;</span> );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Define of include your main plugin class</span></div>
<div class="line">    <span class="keywordflow">if</span>( !class_exists( <span class="stringliteral">&#39;TestPlugin&#39;</span> ) ) {</div>
<div class="line">      <span class="keyword">class </span>TestPlugin <span class="keyword">extends</span> <a class="code" href="classWPDKWordPressPlugin.html">WPDKWordPressPlugin</a> {</div>
<div class="line"></div>
<div class="line">        <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="classWPDKWordPressPlugin.html#a8ef77288a5f940c68ebc57fdf0102078" title="Construct.">__construct</a>( $file ) {</div>
<div class="line"></div>
<div class="line">          parent::__construct( $file );</div>
<div class="line"></div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Called when the plugin is activate - only first time. */</span></div>
<div class="line">        <span class="keyword">function</span> <a class="code" href="classWPDKWordPressPlugin.html#a82be1884cad5341f9cf437a4d5ef788c" title="Activation.">activation</a>() {</div>
<div class="line">          <span class="comment">/* To override. */</span></div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    $GLOBALS[<span class="stringliteral">&#39;TestPlugin&#39;</span>] = <span class="keyword">new</span> TestPlugin();</div>
</div><!-- fragment --><p>In <code>activation</code> method you can insert the code your plugin eventually needs to execute in plugin activation phase.</p>
<h1><a class="anchor" id="page_how_to_plugin_5"></a>
Plugin deactivation</h1>
<p>The method <code>deactivation</code> of your <code>TestPlugin</code> class is invoked every time your plugin is deactivated. The deactivation of a WordPress plugin happens just once, normally through <code>plugin</code> page of WordPress admin area, when a user choose to deactivate a plugin. From that moment on, the plugin becomes <em>inactive</em>, and this method is not invoked anymore.</p>
<p>To override this method and put all the code you need to execute whenever your plugin is deactivated, you have to declare it into <code>TestPlugin</code> class definition, in this way: </p>
<pre class="fragment">/**
  * Plugin Name: Test Plugin
  * Plugin URI: http://your-domain.com
  * Description: my WordPress plugin with full WPDK support
  * Version: 1.0.0
  * Author: You
  * Author URI: http://your-domain.com
  */

// Include WPDK framework - the root directory name of WPDK may be different.
// Please change the line below according to your environment.
require_once( trailingslashit( dirname( __FILE__ ) ) . 'wpdk-production/wpdk.php' );

// Define of include your main plugin class
if( !class_exists( 'TestPlugin' ) ) {
  class TestPlugin extends WPDKWordPressPlugin {

    /**
      * Create an instance of TestPlugin class
      */
    public function __construct( $file ) {

      parent::__construct( $file );

    }

    /* Called when the plugin is activate - only first time. */
    function activation() {
      /* To override. */
    }

    /* Called when the plugin is deactivated. */
    function deactivation() {
      /* To override. */
    }

  }
}

$GLOBALS['TestPlugin'] = new TestPlugin();
</pre><p>In <code>deactivation</code> method you can insert the code your plugin eventually needs to execute in plugin deactivation phase.</p>
<h1><a class="anchor" id="page_how_to_plugin_6"></a>
Plugin loaded</h1>
<p>The method <code>loaded</code> of your <code>TestPlugin</code> class is invoked every time your plugin is loaded. Please note that <b>loading is not activation</b>: every single time this plugin is loaded by WordPress environment, this method will be invoked.</p>
<p>To override this method and put all the code you need to execute whenever your plugin is loaded, you have to declare it into <code>TestPlugin</code> class definition, in this way: </p>
<pre class="fragment">/**
  * Plugin Name: Test Plugin
  * Plugin URI: http://your-domain.com
  * Description: my WordPress plugin with full WPDK support
  * Version: 1.0.0
  * Author: You
  * Author URI: http://your-domain.com
  */

// Include WPDK framework - the root directory name of WPDK may be different.
// Please change the line below according to your environment.
require_once( trailingslashit( dirname( __FILE__ ) ) . 'wpdk-production/wpdk.php' );

// Define of include your main plugin class
if( !class_exists( 'TestPlugin' ) ) {
  class TestPlugin extends WPDKWordPressPlugin {

    /**
      * Create an instance of TestPlugin class
      */
    public function __construct( $file ) {

      parent::__construct( $file );

    }

    /* Called when the plugin is activate - only first time. */
    function activation() {
      /* To override. */
    }

    /* Called when the plugin is deactivated. */
    function deactivation() {
      /* To override. */
    }

    /* Called when the plugin is loaded. */
    function loaded() {
      /* To override. */
    }

  }
}

$GLOBALS['TestPlugin'] = new TestPlugin();
</pre><p>In <code>loaded</code> method you can insert the code your plugin eventually needs to execute in plugin loading.</p>
<h1><a class="anchor" id="page_how_to_plugin_7"></a>
Plugin configuration</h1>
<p>The method <code>configuration</code> of your <code>TestPlugin</code> class is invoked every time your plugin is loaded. Please note that <b>loading is not activation</b>: every single time this plugin is loaded from WordPress environment, this method will be invoked.</p>
<p>Here you can put all stuffs about the configuration of your plugin: for example, the load of current plugin configuration from WordPress DB; it is a commodity: you can perform the same task in another way. Nevertheless, it can be really useful for you to use this hook, because this method is always executed <b>AFTER the plugin has been fully loaded from WordPress environment</b>.</p>
<p>To override this method and put all the code you need to execute whenever your plugin is loaded, you have to declare it into <code>TestPlugin</code> class definition, in this way: </p>
<pre class="fragment">/**
  * Plugin Name: Test Plugin
  * Plugin URI: http://your-domain.com
  * Description: my WordPress plugin with full WPDK support
  * Version: 1.0.0
  * Author: You
  * Author URI: http://your-domain.com
  */

// Include WPDK framework - the root directory name of WPDK may be different.
// Please change the line below according to your environment.
require_once( trailingslashit( dirname( __FILE__ ) ) . 'wpdk-production/wpdk.php' );

// Define of include your main plugin class
if( !class_exists( 'TestPlugin' ) ) {
  class TestPlugin extends WPDKWordPressPlugin {

    /**
      * Create an instance of TestPlugin class
      */
    public function __construct( $file ) {

      parent::__construct( $file );

    }

    /* Called when the plugin is activate - only first time. */
    function activation() {
      /* To override. */
    }

    /* Called when the plugin is deactivated. */
    function deactivation() {
      /* To override. */
    }

    /* Called when the plugin is loaded. */
    function loaded() {
      /* To override. */
    }

    /* Called when the plugin is fully loaded. */
    function configuration() {
      /* To override. */    
    }

  }
}

$GLOBALS['TestPlugin'] = new TestPlugin();
</pre><p>In <code>configuration</code> method you can insert the code your plugin eventually needs to execute about its configuration.</p>
<h1><a class="anchor" id="page_how_to_plugin_8"></a>
Commodity</h1>
<p>Your <code>TestPlugin</code> main class has also some commodity methods, useful to group together some similar tasks.</p>
<p>For example, with <code>_defines</code> method, you can insert the definition of all <em>PHP</em> <code>define</code> used by your class. You can write your own <em>PHP</em> <code>define</code> directly in this method, or you can also put your <code>define</code> in file <code>defines.php</code>, stored whatever in your plugin folders tree, and included by this method.</p>
<p><code>_defines()</code> internal method has to be invoked in the <code>TestPlugin</code> constructor. It is not attached to any WordPress action.</p>
<p>Your code, now: </p>
<pre class="fragment">/**
  * Plugin Name: Test Plugin
  * Plugin URI: http://your-domain.com
  * Description: my WordPress plugin with full WPDK support
  * Version: 1.0.0
  * Author: You
  * Author URI: http://your-domain.com
  */

// Include WPDK framework - the root directory name of WPDK may be different.
// Please change the line below according to your environment.
require_once( trailingslashit( dirname( __FILE__ ) ) . 'wpdk-production/wpdk.php' );

// Define of include your main plugin class
if( !class_exists( 'TestPlugin' ) ) {
  class TestPlugin extends WPDKWordPressPlugin {

    /**
      * Create an instance of TestPlugin class
      */
    public function __construct( $file ) {

      parent::__construct( $file );

      $this-&gt;_defines();

    }

    /**
      * Include the external file with my own defines
      */
    private function _defines() {
      include_once( 'defines.php' );
    }

    /* Called when the plugin is activate - only first time. */
    function activation() {
      /* To override. */
    }

    /* Called when the plugin is deactivated. */
    function deactivation() {
      /* To override. */
    }

    /* Called when the plugin is loaded. */
    function loaded() {
      /* To override. */
    }

    /* Called when the plugin is fully loaded. */
    function configuration() {
      /* To override. */    
    }

  }
}

$GLOBALS['TestPlugin'] = new TestPlugin( __FILE__ );
</pre><h1><a class="anchor" id="page_how_to_plugin_9"></a>
Writing code in your plugin specifically related to WordPress frontend</h1>
<p>The method <code>theme</code> of your <code>TestPlugin</code> class is called every time your plugin is loaded, after the invocation of <code>loaded</code> and <code>configuration</code> methods; but this calling happens <b>if, and only if, the web request is related to the front-end side of WordPress</b>: that is to say, not related in any way to the admin side of WordPress. Loading is not activation: every single time this plugin is loaded from WordPress environment, this method will be invoked.</p>
<p>To override this method and put all the code you need to execute whenever your plugin is loaded, you have to declare it into <code>TestPlugin</code> class definition, in this way: </p>
<pre class="fragment">/**
  * Plugin Name: Test Plugin
  * Plugin URI: http://your-domain.com
  * Description: my WordPress plugin with full WPDK support
  * Version: 1.0.0
  * Author: You
  * Author URI: http://your-domain.com
  */

// Include WPDK framework - the root directory name of WPDK may be different.
// Please change the line below according to your environment.
require_once( trailingslashit( dirname( __FILE__ ) ) . 'wpdk-production/wpdk.php' );

// Define of include your main plugin class
if( !class_exists( 'TestPlugin' ) ) {
  class TestPlugin extends WPDKWordPressPlugin {

    /**
      * Create an instance of TestPlugin class
      */
    public function __construct( $file ) {

      parent::__construct( $file );

      $this-&gt;_defines();

    }

    /**
      * Include the external file with my own defines
      */
    private function _defines() {
      include_once( 'defines.php' );
    }

    /* Called when the plugin is activate - only first time. */
    function activation() {
      /* To override. */
    }

    /* Called when the plugin is deactivated. */
    function deactivation() {
      /* To override. */
    }

    /* Called when the plugin is loaded. */
    function loaded() {
      /* To override. */
    }

    /* Called when the plugin is fully loaded. */
    function configuration() {
      /* To override. */    
    }

    /* Called only if the web request is related to the front-end side of WordPress */
    function theme() {
      /* To override. */
    }

  }
}

$GLOBALS['TestPlugin'] = new TestPlugin( __FILE__ );
</pre><p>In <code>theme</code> method, you can insert all code your plugin needs to execute in the front-end area of your WordPress environment. For example, you can insert here the declaration of a specific class instance that handles all stuffs about front-end area. Or you can directly add here some specific hooks related to front-end WordPress filters, like <code>the_title</code> or <code>the_content</code>. This gives your plugin more readability and flow comprehension.</p>
<h1><a class="anchor" id="page_how_to_plugin_10"></a>
Writing code in your plugin specifically related to WordPress admin area</h1>
<p>The method <code>admin</code> of your <code>TestPlugin</code> class is called every time your plugin is loaded, after the invocation of methods <code>loaded</code> and <code>configuration</code>; but this calling happens <b>if, and only if, the web request is related to the admin side of WordPress</b>. Loading is not activation: every single time this plugin is loaded from WordPress environment, this method will be invoked.</p>
<p>To override this method and put all the code you need to execute whenever your plugin is loaded, you have to declare it into <code>TestPlugin</code> class definition, in this way: </p>
<pre class="fragment">/**
  * Plugin Name: Test Plugin
  * Plugin URI: http://your-domain.com
  * Description: my WordPress plugin with full WPDK support
  * Version: 1.0.0
  * Author: You
  * Author URI: http://your-domain.com
  */

// Include WPDK framework - the root directory name of WPDK may be different.
// Please change the line below according to your environment.
require_once( trailingslashit( dirname( __FILE__ ) ) . 'wpdk-production/wpdk.php' );

// Define of include your main plugin class
if( !class_exists( 'TestPlugin' ) ) {
  class TestPlugin extends WPDKWordPressPlugin {

    /**
      * Create an instance of TestPlugin class
      */
    public function __construct( $file ) {

      parent::__construct( $file );

      $this-&gt;_defines();

    }

    /**
      * Include the external file with my own defines
      */
    private function _defines() {
      include_once( 'defines.php' );
    }

    /* Called when the plugin is activate - only first time. */
    function activation() {
      /* To override. */
    }

    /* Called when the plugin is deactivated. */
    function deactivation() {
      /* To override. */
    }

    /* Called when the plugin is loaded. */
    function loaded() {
      /* To override. */
    }

    /* Called when the plugin is fully loaded. */
    function configuration() {
      /* To override. */    
    }

    /* Called only if the web request is related to the front-end side of WordPress */
    function theme() {
      /* To override. */
    }

    /* Called only if the web request is related to the admin side of WordPress */
    function admin() {
      /* To override. */
    }

  }
}

$GLOBALS['TestPlugin'] = new TestPlugin( __FILE__ );
</pre><p>In <code>admin</code> method, you can insert all code your plugin needs to execute in the admin area of your WordPress environment. For example, you can insert here the declaration of a specific class instance that handles all stuffs about admin area ( plugin main menu item creation, css and javascript enqueuing, ecc. ) . Or you can directly add here some specific hooks related to administration WordPress filters, like <code>menu_order</code> or <code>admin_head</code>. This gives your plugin more readability and flow comprehension.</p>
<h1><a class="anchor" id="page_how_to_plugin_11"></a>
Introduction to available plugin enhancements</h1>
<h3><a class="el" href="classWPDKWordPressAdmin.html">WPDKWordPressAdmin</a> class</h3>
<p>WPDK has another most important class that encapsulates tasks to perform in the admin side of WordPress: <code><a class="el" href="classWPDKWordPressAdmin.html">WPDKWordPressAdmin</a></code>. See related documentation or <a class="el" href="page_howto.html">the How-To section</a> for all details.</p>
<h3>WPDK autoloading technology</h3>
<p>This is a basic guide, that shows you how to develop your plugin in order to made it full compatible with all WPDK features. To make use of powerful <em>WPDK autoloading technology</em>, see <a class="el" href="page_howto.html">the How-To section</a> for examples of use of this technology integrated in this plugin model. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="wpdk-footer"></div>
